<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.software.code.dao.HealthCodeMangerDao">
    <resultMap type="org.software.code.model.entity.HealthCodeManager" id="HealthCodeManagerMap">
        <result property="mid" column="mid" />
        <result property="name" column="name" />
        <result property="identityCard" column="identity_card" />
        <result property="passwordHash" column="password_hash" />
        <result property="status" column="status" />
        <result property="createdAt" column="created_at" />
        <result property="updatedAt" column="updated_at" />
    </resultMap>

    
    <!-- 添加健康码管理员 -->
    <insert id="addHealthCodeManager">
        INSERT INTO health_code_user.health_code_manager
            (mid, identity_card, password_hash, name, status)
        VALUES
            (#{mid}, #{identityCard}, #{passwordHash}, #{name}, #{status});
    </insert>

    <!-- 根据 MID 更新状态 -->
    <update id="updateStatusByMID">
        UPDATE health_code_user.health_code_manager
        SET status = #{status}
        WHERE mid = #{mid};
    </update>

    <!-- 查询所有健康码管理员 -->
    <select id="getHealthCodeManagerList" resultMap="HealthCodeManagerMap">
        SELECT *
        FROM health_code_user.health_code_manager;
    </select>

    <!-- 根据身份证号查询健康码管理员 -->
    <select id="getHealthCodeManagerByID" resultMap="HealthCodeManagerMap">
        SELECT *
        FROM health_code_user.health_code_manager
        WHERE identity_card = #{identityCard}
            LIMIT 1;
    </select>

    <!-- 根据 MID 查询健康码管理员 -->
    <select id="getHealthCodeManagerByMID" resultMap="HealthCodeManagerMap">
        SELECT *
        FROM health_code_user.health_code_manager
        WHERE mid = #{mid}
            LIMIT 1;
    </select>

</mapper>
